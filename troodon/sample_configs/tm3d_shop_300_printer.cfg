##### This works for both 300 and 400 size troodons ##### 
# 1. find you mcu id or pull from a previous printer.cfg. you can use the ls /dev/serial/by-id/* command to get it. 
# 2. Enter the mcu id on the line below this replacing the example serial

[include elements/base_functions_include.cfg]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_sam4e8e_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

[temperature_fan Duet_WiFi]
#query_adc Name="temperature_fan Duet_WiFi"
sensor_temperature1:16
sensor_adc1: 0.421429


# 3. If using a toolboard with canbus then uncomment the section below and use the uuid for canbus 
# "it helps to identify which board is which  by unplugging the other mcu if using multiple usb connections"

#[mcu head0]
#canbus_uuid=xxxxxxxxxxxxxxxxx

 
# 4. Select what features you would like. The sections with a # at the end are a mandatory choice of one out of the group

# choose size and macros for the size of troodon you have #

##### FRAME AND BED #####
#[include elements/troodon/size/300.cfg]  
#[include elements/troodon/size/400.cfg]

[include elements/troodon/size/300_kinematic_bed.cfg]  


##### klipper_elements SCREEN MACROS #####
[include elements/troodon/functions/klipper_screen.cfg]  


##### MACROS uncommit based on the bed size #####
[include elements/troodon/functions/webui_macros300.cfg]  
#[include elements/troodon/functions/webui_macros400.cfg]
#[include elements/troodon/functions/macros_tm3d_testing.cfg]


##### EXTRUDER MOTOR INVERT DIRECTION #####
[include elements/troodon/extruder/dir_change_off.cfg] ###stock extruder rotation###
#[include elements/troodon/extruder/dir_change_on.cfg ###use if extruder rotation is wrong###


##### EXTRUDER MOTOR #####
[include elements/troodon/extruder/ddestock100417mm.cfg] ###orbiter 17mm nema 14###
#[include elements/troodon/extruder/ddestock100420mm_LC.cfg] ###orbiter 20mm nema 14###
#[include elements/troodon/extruder/ddestock100420mm_HC.cfg] ###orbiter 20mm nema 14###
#[include elements/troodon/extruder/lgx_lite_100420mm.cfg] ### lgx lite 20mm nema 14###
#[include elements/troodon/extruder/ddemoonsmotor.cfg] ### orbiter moons nema 14###


##### EXTRUDER MOTOR FOR CANBUS TOOLBOARD #####
#[include elements/troodon/extruder/ddestock100417mm_ebb.cfg] ###17mm nema 14 ebb toolboard###
#[include elements/troodon/extruder/ddestock100420mm_ebb_LC.cfg] ###20mm nema 14 ebb toolboard###
#[include elements/troodon/extruder/ddestock100420mm_ebb_HC.cfg] ###20mm nema 14 ebb toolboard###
#[include elements/troodon/extruder/lgx_lite_100420mm_ebb.cfg] ### lgx lite 20mm nema 14###


##### THERMISTOR #####
[include elements/troodon/hotend/stockthermistor.cfg] ###stock thermister###
#[include elements/troodon/hotend/pt1000.cfg] ###500c temp limit###
#[include elements/troodon/hotend/dyze500.cfg] ###500c temp limit###
#[include elements/troodon/hotend/slice300.cfg] ###300c temp limit###
#[include elements/troodon/hotend/slice450.cfg] ###450c temp limit###


##### FANS AND LEDS #####
#[include elements/troodon/fans/quietfansandledschamber.cfg] ###quiet fans and leds and chamber###
#[include elements/troodon/fans/fansandleds.cfg]  
[include elements/troodon/fans/fansandledschamber.cfg] ###stock fans and leds and chamber###


##### SMART PLUG POWER CONTROL #####
[include elements/troodon/functions/smart_plug.cfg]


##### Bed MESH PROBES #####
[include elements/troodon/probes/bl_touch_stock.cfg] ###bl-touch connected to stock board###
#[include elements/troodon/probes/bl_touch_ebb_can.cfg] ###bl-touch connected to canbus toolboard###


##### Bed MESH #####
[include elements/troodon/mesh/lowresmesh300.cfg] ###3x3###
#[include elements/troodon/mesh/lowresmesh400.cfg] ###5x5###


#[include elements/troodon/mesh/standardmesh300.cfg] ###5x5###
#[include elements/troodon/mesh/standardmesh400.cfg] ###7x7###

#[include elements/troodon/mesh/highresmesh300.cfg] ###15x15###
#[include elements/troodon/mesh/highresmesh400.cfg] ###20x20###


##### RUNOUT SENSOR #####
[include elements/troodon/functions/filamentrunout.cfg] ###enable stock filament runout sensor###


##### TIMELAPSE #####
[include elements/troodon/functions/timelapse.cfg] ###use included timelapse macros###


##### INPUT SHAPING do not edit use SHAPER_CALIBRATE in console with acceleromter to set #####
[include elements/troodon/adxl/300_adxl.cfg] ###adxl connected to stock harness###
#[include elements/troodon/adxl/300_adxl_ebb.cfg] ###adxl bulit-in to ebb toolboard###

#[include elements/troodon/adxl/400_adxl.cfg] ###adxl connected to stock harness###
#[include elements/troodon/adxl/400_adxl_ebb.cfg] ###adxl bulit-in to ebb toolboard###

##### SHOP PRINTER CONFIG EDIT #####

[force_move]
enable_force_move: True

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [input_shaper]
#*# shaper_type_x = mzv
#*# shaper_freq_x = 68.0
#*# shaper_type_y = ei
#*# shaper_freq_y = 57.6
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 22.220
#*# pid_ki = 1.166
#*# pid_kd = 105.822
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 65.753
#*# pid_ki = 4.925
#*# pid_kd = 219.451
#*#
#*# [bltouch]
#*# z_offset = 3.549
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	0.057723, 0.113973, 0.098973
#*# 	0.088973, 0.097723, 0.116473
#*# 	0.031473, 0.068973, 0.082723
#*# tension = 0.2
#*# min_x = 40.0
#*# algo = bicubic
#*# y_count = 3
#*# mesh_y_pps = 2
#*# min_y = 40.0
#*# x_count = 3
#*# max_y = 260.0
#*# mesh_x_pps = 2
#*# max_x = 260.0
#*#
#*# [bed_mesh TM3D]
#*# version = 1
#*# points =
#*# 	  -1.815250, -1.686500, -1.632750
#*# 	  -0.536500, -0.327750, -0.119000
#*# 	  0.733500, 1.093500, 1.384750
#*# tension = 0.2
#*# min_x = 40.0
#*# algo = bicubic
#*# y_count = 3
#*# mesh_y_pps = 2
#*# min_y = 40.0
#*# x_count = 3
#*# max_y = 260.0
#*# mesh_x_pps = 2
#*# max_x = 260.0
