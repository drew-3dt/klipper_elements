[force_move]
enable_force_move: True

[gcode_button filament_load]
pin: head0:PB6
press_gcode:
    G28 x
	G28 Y
	PAUSE
release_gcode:
	M117 Filament loading   
	M82                      #set extruder to absolute mode
	G92 E0
	G4 P2000             # wait for two second
	FORCE_MOVE STEPPER=extruder DISTANCE=20 VELOCITY=10 ACCEL=1000  # load filament inside the gears force move needs to be enabled
	M109 S235 T0       # set hotend temperature and wait
	G1 E100 F300        # extrude 130mm
	M400                      # wait for current move to finish
	M104 S0 T0           # set hotend temperature to 0
	G92 E0                  # zero extruder position


[gcode_button filament_unload]
pin: head0:PB5                  #use the input pin you have connected the sensor
release_gcode:
	M117 Filament unloading
	M82                       #set extruder to absolute mode
	G92 E0
	M109 S235 T0
	G0 E-5 F3600       #extract filament to cold end
	G0 E-100 F300       # continue extraction slow allow filament to be cooled enough before reaches the gears
	M104 S0 T0
press_gcode:

